!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.plume={})}(this,function(t){var e={css:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",math:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1}},n={math:function(t){return 1-e.math(1-t)}},i={InQuad:{css:"cubic-bezier(.55, .085, .68, .53)",math:function(t){return t*t}},OutQuad:{css:"cubic-bezier(.25, .46, .45, .94)",math:function(t){return t*(2-t)}},InOutQuad:{css:"cubic-bezier(.455, .03, .515, .955)",math:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},InCubic:{css:"cubic-bezier(.550, .055, .675, .19)",math:function(t){return t*t*t}},OutCubic:{css:"cubic-bezier(.215, .61, .355, 1)",math:function(t){return--t*t*t+1}},InOutCubic:{css:"cubic-bezier(.645, .045, .355, 1)",math:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},InQuart:{css:"cubic-bezier(.895, .03, .685, .22)",math:function(t){return t*t*t*t}},OutQuart:{css:"cubic-bezier(.165, .84, .44, 1)",math:function(t){return 1- --t*t*t*t}},InOutQuart:{css:"cubic-bezier(.77, 0, .175, 1)",math:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},InQuint:{css:"cubic-bezier(.755, .05, .855, .06)",math:function(t){return t*t*t*t*t}},OutQuint:{css:"cubic-bezier(.23, 1, .32, 1)",math:function(t){return--t*t*t*t*t+1}},InOutQuint:{css:"cubic-bezier(.86, 0, .07, 1)",math:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},InExpo:{css:"cubic-bezier(.95, .05, .795, .035)",math:function(t){return 0===t?0:Math.pow(1024,t-1)}},OutExpo:{css:"cubic-bezier(.19, 1, .22, 1)",math:function(t){return 1===t?1:1-Math.pow(2,-10*t)}},InOutExpo:{css:"cubic-bezier(1, 0, 0, 1)",math:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},InCirc:{css:"cubic-bezier(.6, .04, .98, .335)",math:function(t){return 1-Math.sqrt(1-t*t)}},OutCirc:{css:"cubic-bezier(.075, .82, .165, 1)",math:function(t){return Math.sqrt(1- --t*t)}},InOutCirc:{css:"cubic-bezier(.785, .135, .15, .86)",math:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},InBack:{css:"cubic-bezier(0.6, -0.28, 0.735, 0.045)",math:function(t){var e=1.70158;return t*t*((e+1)*t-e)}},OutBack:e,InOutBack:{css:"cubic-bezier(0.68, -0.55, 0.265, 1.55)",math:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},InBounce:n,OutBounce:{math:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},InOutBounce:{math:function(t){return t<.5?.5*n.math(2*t):.5*e.math(2*t-1)+.5}},InSine:{math:function(t){return 1-Math.cos(t*Math.PI/2)},css:"cubic-bezier(0.470, 0.000, 0.745, 0.715)"},OutSine:{math:function(t){return Math.sin(t*Math.PI/2)},css:"cubic-bezier(0.390, 0.575, 0.565, 1.000)"},InOutSine:{math:function(t){return.5*(1-Math.cos(Math.PI*t))},css:"cubic-bezier(0.445, 0.050, 0.550, 0.950)"},Linear:{css:"linear",math:function(t){return t}}},o=function(){};o.update=function(t){var e=t-o.lastTsl;o.DELTA_TIME=e,o.TIME=performance.now(),o.lastTsl=t;for(var n=o.renders.length-1;n>=0;n--){var i=o.renders[n];i&&i.callback&&i.callback(t,e)}for(var r=o.ticks.length-1;r>=0;r--){var s=o.ticks[r];s.callback&&s.callback(t,e),o.ticks.splice(r,1)}requestAnimationFrame(o.update)},o.init=function(){o.lastTsl=performance.now(),requestAnimationFrame(o.update)},o.tick=function(t){o.ticks.unshift({callback:t})},o.start=function(t,e){void 0===e&&(e=null),o.renders.unshift({callback:t,identifier:e})},o.stop=function(t){var e=o.renders.findIndex(function(e){return e.identifier===t});~e&&o.renders.splice(e,1)},o.init(),o.renders=[],o.ticks=[];var r=function(){};r.generateUid=function(){var t=new Uint32Array(8);window.crypto.getRandomValues(t);for(var e="",n=0;n<t.length;n++)e+=(n<2||n>5?"":"-")+t[n].toString(16).slice(-4);return e};var s=function(){};s.update=function(t,e){for(var n=s.callbacks.length-1;n>=0;n--){var i=s.callbacks[n];i.currentTime+=e,i.currentTime>=i.timeoutTime&&(i.callback(),s.remove(i))}},s.create=function(t,e){var n={callback:t,timeoutTime:e,currentTime:0};return s.callbacks.unshift(n),n},s.remove=function(t){var e=s.callbacks.indexOf(t);-1!==e&&s.callbacks.splice(e,1)},s.__uid__=r.generateUid(),o.start(s.update,s.__uid__),s.callbacks=[];var a=function(){};a.capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},a.camelCase=function(t){return a.wordsOf(t).map(function(t,e){return 0===e?t.toLowerCase():a.capitalize(t.toLowerCase())}).join("")},a.kebabCase=function(t){return a.wordsOf(t).map(function(t,e){return t.toLowerCase()}).join("-")},a.wordsOf=function(t){return t.match(/([A-Z][a-z]+)|([a-z]+)|([A-Z]+)/g)};var u=function t(e,n,i,o,r,s,a,u,h){void 0===n&&(n=1),void 0===i&&(i=0),this._el=e,this._duration=n,this._delay=i,this._ease=o,this.onStart=r,this.onComplete=s,this._properties=t.parseProperties(a),this._isPlaying=!1,this._isKilled=!1,this.clearProps=h,this.onCompleteResolveCallback=u,this._startTween()};u.parseTransform=function(t){var e="";return void 0===t.y&&void 0===t.x&&void 0===t.z||(e+="translate3d("+(t.x||0)+"px,"+(t.y||0)+"px,"+(t.z||0)+"px)"),void 0!==t.scale&&(e+="scale("+t.scale+")"),void 0!==t.scaleX&&(e+="scaleX("+t.scaleX+")"),void 0!==t.scaleY&&(e+="scaleY("+t.scaleY+")"),void 0!==t.rotation||void 0!==t.rotationX&&void 0!==t.rotationY?e+="rotate("+(void 0!==t.rotation?t.rotation:t.rotationX)+"deg)":void 0!==t.rotationX?e+="rotate("+t.rotationX+"deg)":void 0!==t.rotationY&&(e+="rotate("+t.rotationY+"deg)"),e.length>0?{transform:e}:{}},u.parseProperties=function(t){var e=u.parseTransform(t),n={};for(var i in t){var o=t[i];"transform"!==u.parsePropFromName(i)&&(n[i]="number"==typeof o&&"opacity"!==i?o+"px":o)}return Object.assign({},e,n)},u.prototype._startTween=function(){try{var t=this;if(!t._el)return;t._isPlaying=!0,t._el.__tween__=t;var e=Object.keys(t._properties),n=e.map(function(e){return a.kebabCase(e)+" "+t._duration+"s "+t._ease.css+" "+t._delay+"s"}).join(","),i=e.map(function(t){return a.kebabCase(t)}).join(",");o.tick(function(){var e;e=setTimeout(function(){for(var o in clearTimeout(e),t._el.style.transition=n,t._el.style.willChange=i,t._properties)t._el.style[o]=t._properties[o];t.onStart&&t.onStart(),s.create(t._onTweenComplete.bind(t),1e3*(t._duration+t._delay))},0)})}catch(t){return Promise.reject(t)}},u.prototype._onTweenComplete=function(){!this._isKilled&&this.onComplete&&this.onComplete(),this.clearProps&&this.clearTransitionProps(),this.onCompleteResolveCallback()},u.prototype.clearTransitionProps=function(){this._el.style.transition="",this._el.style.willChange=""},u.parsePropFromName=function(t){return["x","y","z","rotation","rotationX","rotationY","scale","scaleX","scaleY","scaleZ"].includes(t)?"transform":t},u.prototype._stopTween=function(){this._el.style.willChange="",this._el.__tween__=null},u.prototype._reset=function(){this._el.style.transition="none",this._el.style.willChange="",this._el.__tween__._isKilled=!0,this._el.__tween__._isPlaying=!1};var h=function(){};h.clamp=function(t,e,n){return Math.min(n,Math.max(e,t))},h.clamp01=function(t){return h.clamp(t,0,1)},h.degToRad=function(t){return t*Math.PI/180},h.radToDeg=function(t){return 180*t/Math.PI},h.lerp=function(t,e,n){return t+(e-t)*n},h.map=function(t,e,n,i,o){return(t-e)/(n-e)*(o-i)+i},h.toFixed=function(t,e){return parseFloat(t.toFixed(e))},h.roundToNearest=function(t,e){return Math.round(t/e)*e},h.step=function(t,e){return e<t?0:1},h.smoothStep=function(t,e,n){var i=Math.max(0,Math.min(1,(t-e)/(n-e)));return i*i*(3-2*i)},h.mod=function(t,e){return(t%e+e)%e},h.fract=function(t){return t-Math.floor(t)},h.max=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Math.max(t)},h.maxBy=function(t,e){for(var n=t[0][e],i=1,o=t.length;i<o;i++){var r=t[i][e];n=r>n?r:n}return n},h.minBy=function(t,e){for(var n=t[0][e],i=1,o=t.length;i<o;i++){var r=t[i][e];n=r<n?r:n}return n},h.min=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Math.min(t)},h.isOdd=function(t){return!!(1&t)},h.isEven=function(t){return!(1&t)},h.average=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n=0,i=0,o=t;i<o.length;i+=1){n+=+o[i]}return n/t.length},h.difference=function(t,e){return Math.abs(t-e)};var c=function(t){void 0===t&&(t={});var e=t.x;void 0===e&&(e=0);var n=t.y;void 0===n&&(n=0),this.x=e,this.y=n},l={magnitude:{configurable:!0},sqrMagnitude:{configurable:!0},angle:{configurable:!0}};l.magnitude.get=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},l.sqrMagnitude.get=function(){return this.x*this.x+this.y*this.y},l.angle.get=function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},c.prototype.clear=function(){return this.x=0,this.y=0,this},c.prototype.lerp=function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},c.prototype.mult=function(t){return this.x*=t.x,this.y*=t.y,this},c.mult=function(t,e){return new c({x:t.x*e.x,y:t.y*e.y})},c.prototype.multScalar=function(t){return this.x*=t,this.y*=t,this},c.multScalar=function(t,e){return new c({x:t.x*e,y:t.y*e})},c.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},c.prototype.subScalar=function(t){return this.x-=t,this.y-=t,this},c.sub=function(t,e){return new c({x:t.x-e.x,y:t.y-e.y})},c.subScalar=function(t,e){return new c({x:t.x-e,y:t.y-e})},c.divideScalar=function(t,e){return c.multScalar(t,1/e)},c.add=function(t,e){return new c({x:t.x+e.x,y:t.y+e.y})},c.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},c.prototype.addScalar=function(t){return this.x+=t,this.y+=t,this},c.prototype.divide=function(t){return this.x/=t.x,this.y/=t.y,this},c.divide=function(t,e){return new c({x:t.x/e.x,y:t.y/e.y})},c.prototype.divideScalar=function(t){return this.multScalar(1/t)},c.prototype.dot=function(t){return this.x*t.x+this.y*t.y},c.prototype.cross=function(t){return this.x*t.y-this.y*t.x},c.prototype.clamp=function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},c.prototype.map=function(t,e,n,i){return this.x=h.map(this.x,t.x,e.x,n.x,i.x),this.y=h.map(this.y,t.y,e.y,n.y,i.y),this},c.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},c.copy=function(t){return new c({x:t.x,y:t.y})},c.prototype.normalize=function(){return this.divideScalar(this.magnitude||1)},c.abs=function(t){return new c({x:Math.abs(t.x),y:Math.abs(t.y)})},Object.defineProperties(c.prototype,l);var d=function(t){var e=t.damping;void 0===e&&(e=12);var n=t.stiffness;void 0===n&&(n=120);var i=t.mass;void 0===i&&(i=1);this.damping=e,this.stiffness=n,this.mass=i,this.isBelowDisplacementThreshold=!1,this.isBelowVelocityThreshold=!1,this.t=0,this.killed=!1,this.previousPosition=null,this.position=0},p={REST_VELOCITY:{configurable:!0},REST_DELTA:{configurable:!0}};p.REST_VELOCITY.get=function(){return.01},p.REST_DELTA.get=function(){return.01},d.prototype.interpolate=function(t,e){var n=o.DELTA_TIME;this.t+=n,this.previousPosition=null===this.previousPosition?t:this.position;var i=e-t;this.position=t;var r=this.damping/(2*Math.sqrt(this.stiffness*this.mass)),s=Math.sqrt(this.stiffness/this.mass)/1e3;if(r<1){var a=Math.exp(-r*s*this.t),u=s*Math.sqrt(1-r*r);this.position=e-a*((r*s*i-0)/u*Math.sin(u*this.t)+i*Math.cos(u*this.t))}else{var h=Math.exp(-s*this.t);this.position=e-h*(i+(s*i-0)*this.t)}var c=Math.abs((this.position-this.previousPosition)/n*1e3)<=d.REST_VELOCITY,l=Math.abs(e-this.position)<=d.REST_DELTA;return c&&l&&(this.killed=!0),this.position},Object.defineProperties(d,p);var v=function(t,e,n,o,r,s,a,u,h,c,l){if(void 0===e&&(e=1),void 0===n&&(n=0),void 0===o&&(o=i.Linear),void 0===u&&(u=null),void 0===c&&(c=null),void 0===l&&(l=null),this._target=t,this._duration=e,this._delay=n,this._ease=o,this._isPlaying=!1,this._isKilled=!1,!t)throw new Error("Tween must have a non null target");this.properties=u,null===l&&null===c||(this.springAnimation=new d({damping:l,stiffness:c})),this.onStart=r,this.onUpdate=a,this.onComplete=s,this.onCompleteResolveCallback=h};v.prototype.start=function(){this._startValues=this.createStartValues(),this._endValues=this.properties,this._startTime=performance.now(),this._startTime+=1e3*this._delay,k.mathTweens.unshift(this),Object.defineProperty(this._target,"__mathTween__",{value:this,writable:!0}),this.onStart&&this.onStart()},v.prototype.clear=function(){M(this),this._target.__mathTween__=null},v.prototype.stop=function(){M(this),this.onComplete&&this.onComplete(),this.onCompleteResolveCallback()},v.prototype.createStartValues=function(){var t={};for(var e in this._target)this._target.hasOwnProperty(e)&&(t[e]=this._target[e]);return t},v.prototype.update=function(t){t<this._startTime||(this.springAnimation?this.updateSpring(t):this.updateMath(t))},v.prototype.updateMath=function(t){if(!(t<this._startTime)){var e=(t-this._startTime)/(1e3*this._duration);e>1&&(e=1),this.interpolate(e),this.onUpdate&&this.onUpdate(this._target),this._isKilled||1!==e||(this._isKilled=!0,this.stop())}},v.prototype.updateSpring=function(t){this.interpolateSpring((t-this._startTime)/1e3),this.onUpdate&&this.onUpdate(this._target),!this._isKilled&&this.springAnimation.killed&&(this._isKilled=!0,this.stop())},v.prototype.interpolateSpring=function(t){var e=performance.now();for(var n in this._startValues)if(void 0!==this._endValues[n]){var i=this._startValues[n];this._target[n]=this.springAnimation.interpolate(i,void 0===this._endValues[n]?i:this._endValues[n],e-this.lastTime)}this.lastTime=e},v.prototype.interpolate=function(t){var e=this._ease.math(t);for(var n in this._startValues){var i=this._startValues[n];this._target[n]=h.lerp(i,void 0===this._endValues[n]?i:this._endValues[n],e)}return e};var f="-webkit-",m={justifyContent:function(t){return[{key:f+"justify-content",value:t}]},alignItems:function(t){return[{key:f+"align-items",value:t}]},flex:function(t){return[{key:f+"flex",value:t}]},borderRadius:function(t){return[{key:f+"border-radius",value:t}]},transform:function(t){return[{key:f+"transform",value:t}]},transition:function(t){return[{key:f+"transition",value:t.replace("transform",f+"transform").replace("border-radius",f+"border-radius")}]},flexWrap:function(t){return[{key:f+"flex-wrap",value:t}]},display:function(t){return[{key:"display",value:"flex"===t||"inline-flex"===t?""+f+t:t}]}},g=function(){};g.prefix=function(t){for(var e in t){if(m[e])for(var n=m[e](t[e]),i=0;i<n.length;i++){var o=n[i];t[a.camelCase(o.key)]=o.value}}return t};var _=function(){this._events={}};_.prototype.emit=function(t,e){if(this._events[t])for(var n=this._events[t].length-1;n>=0;n--){(0,this._events[t][n])(e)}},_.prototype.on=function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},_.prototype.off=function(t,e){var n=this._events[t].indexOf(e);~n&&this._events[t].splice(n,1)},_.prototype.stop=function(){this._events={}};var y=function(){},b={isMobile:{configurable:!0},orientation:{configurable:!0},hasVRDisplay:{configurable:!0},isWindowsPhone:{configurable:!0},isIos:{configurable:!0},isAndroid:{configurable:!0},isFirefox:{configurable:!0},isSafari:{configurable:!0},isOpera:{configurable:!0},isIE11:{configurable:!0},isEdge:{configurable:!0},isChrome:{configurable:!0},isIE:{configurable:!0},platform:{configurable:!0},language:{configurable:!0},isTouchDevice:{configurable:!0}};b.isMobile.get=function(){return y.isTouchDevice},b.orientation.get=function(){return window.innerWidth>window.innerHeight?"landscape":"portrait"},b.hasVRDisplay.get=function(){return void 0!==navigator.getVRDisplays},b.isWindowsPhone.get=function(){return/windows phone|iemobile|wpdesktop/.test(navigator.userAgent)},b.isIos.get=function(){return!y.isWindowsPhone&&/ip(hone|od|ad)/i.test(navigator.userAgent)&&!window.MSStream},b.isAndroid.get=function(){return!y.isWindowsPhone&&/android/i.test(navigator.userAgent)},b.isFirefox.get=function(){return navigator.userAgent.indexOf("firefox")>-1},b.isSafari.get=function(){return!!navigator.userAgent.match(/version\/[\d\.]+.*safari/)},b.isOpera.get=function(){return!!navigator.userAgent.indexOf("opr")>-1},b.isIE11.get=function(){return!window.ActiveXObject&&"ActiveXObject"in window},b.isEdge.get=function(){return navigator.userAgent.indexOf("edge")>-1},b.isChrome.get=function(){return null!==window.chrome&&void 0!==window.chrome&&"google inc."==navigator.vendor.toLowerCase()&&!y.isOpera&&!y.isEdge},b.isIE.get=function(){return navigator.appVersion.indexOf("msie")>-1||y.isIE11||navigator.appVersion.indexOf("edge")>-1},b.platform.get=function(){return navigator.platform},b.language.get=function(){return window.navigator.userLanguage||window.navigator.language},b.isTouchDevice.get=function(){return!("undefined"==typeof window||!("ontouchstart"in window||window.DocumentTouch&&"undefined"!=typeof document&&document instanceof window.DocumentTouch))||!("undefined"==typeof navigator||!navigator.maxTouchPoints&&!navigator.msMaxTouchPoints)},Object.defineProperties(y,b);var w={RESIZE:"RESIZE",POP_STATE:"POP_STATE",WHEEL:"WHEEL"},x=new(function(t){function e(){t.call(this),y.isMobile&&window.addEventListener("touchstart",this._preventNativeScroll.bind(this),{passive:!1}),window.addEventListener(y.isMobile?"touchmove":"mousemove",this._onMouseMove.bind(this)),window.addEventListener(y.isMobile?"touchend":"mouseup",this._onMouseUp.bind(this)),window.addEventListener("contextmenu",this._onContextMenu.bind(this)),window.addEventListener("popstate",this._onPopState.bind(this)),window.addEventListener("resize",this._onResize.bind(this)),window.addEventListener("wheel",this._onWheel.bind(this))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._preventNativeScroll=function(t){t.preventDefault(),t.stopPropagation()},e.prototype._onMouseMove=function(t){this.emit(T.MOVE,t)},e.prototype._onMouseUp=function(t){this.emit(T.DROP,t)},e.prototype._onPopState=function(t){this.emit(w.POP_STATE,t)},e.prototype._onResize=function(t){this.emit(w.RESIZE,t)},e.prototype._onContextMenu=function(t){this.emit(T.DROP,t)},e.prototype._onWheel=function(t){this.emit(w.WHEEL,t)},e}(_)),T={DRAG:"DRAG",ENTER:"ENTER",LEAVE:"LEAVE",MOVE:"MOVE",TOUCH:"TOUCH",DROP:"DROP",CLICK:"CLICK",HOVER_IN:"HOVER_IN",HOVER_OUT:"HOVER_OUT"},E=function(t){function e(e){void 0===e&&(e={});var n=e.target;if(t.call(this),!n)throw new Error("An target is required for a interaction");this._touching=!1,this._hold=new c,this._move=new c,this._origin=new c,this._delta=new c,this._last=new c,this.velocity=new c,this._lastMoveTime=0,this.target=n,this._addEventListeners()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){this._touching=!1,this._hold=new c,this._move=new c,this._origin=new c,this._delta=new c,this._last=new c,this.velocity=new c,this._lastMoveTime=0},e.prototype._addEventListeners=function(){this.target.addEventListener("mouseout",this._onHoverOut.bind(this)),this.target.addEventListener("mouseover",this._onHoverIn.bind(this)),this.target.addEventListener("click",this._onClick.bind(this)),this.target.addEventListener(y.isMobile?"touchstart":"mousedown",this._onMouseDown.bind(this)),x.on(T.MOVE,this._onMouseMove.bind(this)),x.on(T.DROP,this._onMouseUp.bind(this))},e.prototype._removeEventListeners=function(){this.target.addEventListener("mouseout",this._onHoverOut.bind(this)),this.target.addEventListener("mouseover",this._onHoverIn.bind(this)),this.target.removeEventListener(y.isMobile?"touchstart":"mousedown",this._onMouseDown.bind(this)),this.target.removeEventListener("click",this._onClick.bind(this)),x.off(T.MOVE,this._onMouseMove.bind(this)),x.off(T.DROP,this._onMouseUp.bind(this))},e.prototype._onClick=function(t){t.preventDefault(),this.emit(T.CLICK,this)},e.prototype._onHoverIn=function(t){t.preventDefault(),this.emit(T.HOVER_IN)},e.prototype._onHoverOut=function(t){t.preventDefault(),this.emit(T.HOVER_OUT)},e.prototype._onMouseDown=function(t){var e=this._getEventPosition(t);!y.isMobile&&t.cancelable&&t.preventDefault(),this._touching=!0,this._origin=c.copy(e),this._hold=c.copy(this._move),this._last=c.copy(e),this.velocity.multScalar(0),this._lastMoveTime=o.TIME,this.emit(T.TOUCH,this)},e.prototype._onMouseUp=function(t){this._touching&&(this._touching=!1,this.emit(T.DROP,this)),this._delta.multScalar(0)},e.prototype._onMouseMove=function(t){var e=this._getEventPosition(t),n=performance.now();this.velocity=c.divideScalar(this._delta,n-this._lastMoveTime).multScalar(1e3),this._lastMoveTime=n,this._touching&&(this._move.x=this._hold.x+e.x-this._origin.x,this._move.y=this._hold.y+e.y-this._origin.y,this._delta.x=e.x-this._last.x,this._delta.y=e.y-this._last.y,this._last.x=e.x,this._last.y=e.y,this.emit(T.DRAG,this)),this.emit(T.MOVE,this)},e.prototype._getEventPosition=function(t){return new c(t.touches||t.changedTouches?t.touches.length?{x:t.touches[0].pageX,y:t.touches[0].pageY}:{x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY}:{x:t.pageX,y:t.pageY})},e}(_),C=function(t){void 0===t&&(t={}),this.props=t,this.__uid__=r.generateUid(),this.onAwake&&this.onAwake()};C.prototype.destroy=function(){this.onUpdate&&o.stop(this.__uid__),this.__el__.getComponents(this.__el__).map(function(t){t.destroy()}),this.onDestroy&&this.onDestroy()},C.prototype.__startRender__=function(){if(!this.render)throw new Error("Render function is required");if(this.__el__=this.render(),this.__el__ instanceof C){var t=this.__el__.render();this.__el__.onStart&&this.__el__.onStart(),this.__el__.onUpdate&&o.start(this.__el__.onUpdate.bind(this.__el__),this.__uid__),this.__el__=t}if(!this.__el__)throw new Error("Render function must return an element");this.onUpdate&&o.start(this.onUpdate.bind(this),this.__uid__),this.onResize&&this.onResize()};var P=function(t){this.props=t,this.el=this.render(t),this._children=[],this.parentNode=null,this.addChildren(t.children),this._interaction=new E({target:this.el}),this._addEventListeners(t.events)},O={height:{configurable:!0},width:{configurable:!0}};O.height.get=function(){return this.el.clientHeight},O.width.get=function(){return this.el.clientWidth},P.getEl=function(t){return void 0!==t.el?t.el:t},P.prototype.set=function(t){void 0===t&&(t={}),k.set(Object.assign({},{el:this.el},t))},P.prototype._renderAttributes=function(t,e){this.props.shortcuts.content||(t.textContent=e.text),e.name&&t.classList.add(e.name),e.href&&t.setAttribute("href",e.href)},P.prototype.getBoundingClientRect=function(){return this.el.getBoundingClientRect()},P.prototype.getComponents=function(t){for(var e=[],n=0,i=t._children;n<i.length;n+=1){var o=i[n];o instanceof C?e.push(o):e=e.concat(this.getComponents(o))}return e},P.prototype._renderShortcuts=function(t,e){e.cx&&S.set({el:t,display:"flex",justifyContent:"center"}),e.cy&&S.set({el:t,display:"flex",alignItems:"center"}),e.centered&&S.set({el:t,display:"flex",alignItems:"center",justifyContent:"center"}),e.col?S.set({el:t,display:"flex",flexDirection:"column"}):e.row&&S.set({el:t,display:"flex",flexDirection:"row"})},P.prototype._renderCss=function(t,e){S.set(Object.assign({},{el:t},e))},P.prototype.render=function(t){var e=null;if("svg"===t.type){var n=document.createElement("div");n.innerHTML=t.shortcuts.content,e=n.firstChild}else e=document.createElement(t.type);return this._renderAttributes(e,t.attributes),this._renderShortcuts(e,t.shortcuts),this._renderCss(e,t.css),e},P.prototype.addChildren=function(t){for(var e=0,n=t;e<n.length;e+=1){this.add(n[e])}},P.prototype.add=function(t){t instanceof C?(t.__startRender__(),this.el.appendChild(t.__el__.el),this._children.push(t),t.__el__.parentNode=this,t.onStart&&t.onStart()):(this.el.appendChild(t.el),t.parentNode=this,this._children.push(t))},P.prototype.text=function(t){this.el.textContent=t},P.prototype.remove=function(){this.el.parentNode&&this.el.parentNode.removeChild(this.el)},P.prototype.clearChildren=function(){for(var t=0,e=0,n=this._children;e<n.length;e+=1){var i=n[e];i instanceof C?(i.__el__.destroy(),i.destroy(),this._children.splice(t,1)):(i.destroy(),this._children.splice(t,1)),t++}},P.prototype.replaceChild=function(t){this.clearChildren(),this.add(t)},P.prototype.destroy=function(){this.remove(),this._removeEventListeners(this.props.events)},P.prototype._addEventListeners=function(t){t.onDrag&&this._interaction.on(T.DRAG,t.onDrag),t.onTouch&&this._interaction.on(T.TOUCH,t.onTouch),t.onDrop&&this._interaction.on(T.DROP,t.onDrop),t.onMove&&this._interaction.on(T.MOVE,t.onMove),t.onClick&&this._interaction.on(T.CLICK,t.onClick),t.onHoverIn&&this._interaction.on(T.HOVER_IN,t.onHoverIn),t.onHoverOut&&this._interaction.on(T.HOVER_OUT,t.onHoverOut)},P.prototype._removeEventListeners=function(t){t.onDrag&&this._interaction.off(T.DRAG,t.onDrag),t.onTouch&&this._interaction.off(T.TOUCH,t.onTouch),t.onDrop&&this._interaction.off(T.DROP,t.onDrop),t.onMove&&this._interaction.off(T.MOVE,t.onMove),t.onClick&&this._interaction.off(T.CLICK,t.onClick),t.onHoverIn&&this._interaction.off(T.HOVER_IN,t.onHoverIn),t.onHoverOut&&this._interaction.off(T.HOVER_OUT,t.onHoverOut)},Object.defineProperties(P.prototype,O);var S=function(){};function R(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&-1===e.indexOf(i)&&(n[i]=t[i]);return n}S.set=function(t){var e=t.el;void 0===e&&(e=null);var n=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&-1===e.indexOf(i)&&(n[i]=t[i]);return n}(t,["el"]);if(!e)throw new Error("Missing target element");(e=P.getEl(e)).__tween__&&e.__tween__._reset();var i=S.parseProperties(n),o=g.prefix(i);for(var r in o)e.style[r]=o[r]},S.parseTransform=function(t){var e="";return void 0===t.y&&void 0===t.x&&void 0===t.z||(e+="translate3d("+(t.x||0)+"px,"+(t.y||0)+"px,"+(t.z||0)+"px)"),void 0!==t.scale||void 0!==t.scaleX&&void 0!==t.scaleY?e+="scale("+(void 0!==t.scale?t.scale:t.scaleX)+")":void 0!==t.scaleX?e+="scaleX("+t.scaleX+")":void 0!==t.scaleY&&(e+="scaleY("+t.scaleY+")"),void 0!==t.rotation?e+="rotate("+t.rotation+"deg)":void 0!==t.rotationX&&(e+="rotateX("+t.rotationX+"deg)"),void 0!==t.rotationY&&(e+="rotateY("+t.rotationY+"deg)"),{transform:e}},S.parsePropFromName=function(t){return["x","y","z","rotation","rotationX","rotationY","scale","scaleX","scaleY","scaleZ"].includes(t)?"transform":t},S.parseProperties=function(t){var e=S.parseTransform(t),n={};for(var i in t){var o=t[i];null!==o&&("transform"!==S.parsePropFromName(i)&&(n[i]="number"==typeof o&&"opacity"!==i&&"zIndex"!==i?o+"px":o))}return Object.assign({},e,n)};var k=function(){};function M(t){var e=k.mathTweens.indexOf(t);~e&&k.mathTweens.splice(e,1)}k._tween=function(t){var e=t.el,n=t.obj;void 0===n&&(n=null);var o=t.duration,r=t.delay;void 0===r&&(r=0);var s=t.stiffness;void 0===s&&(s=null);var a=t.damping;void 0===a&&(a=null);var h=t.ease;void 0===h&&(h=i.Linear);var c=t.onStart,l=t.onComplete,d=t.onUpdate,p=t.resolve,f=R(t,["el","obj","duration","delay","stiffness","damping","ease","onStart","onComplete","onUpdate","resolve"]);e&&!(e instanceof P)&&1!==e.nodeType||null!==n?new v(void 0!==e?e:n,o,r,h,c,l,d,f,p,s,a).start():(e=P.getEl(e),new u(e,o,r,h,c,l,f,p))},k.to=function(t){var e=t.el,n=t.obj;void 0===n&&(n=null);var o=t.duration,r=t.delay;void 0===r&&(r=0);var s=t.stiffness;void 0===s&&(s=null);var a=t.damping;void 0===a&&(a=null);var u=t.ease;void 0===u&&(u=i.Linear);var h=t.onStart,c=t.onComplete,l=t.onUpdate,d=R(t,["el","obj","duration","delay","stiffness","damping","ease","onStart","onComplete","onUpdate"]);return new Promise(function(t,i){if(Array.isArray(e))for(var p=0,v=e;p<v.length;p+=1){k._tween(Object.assign({},{el:v[p],obj:n,duration:o,delay:r,stiffness:s,damping:a,ease:u,onStart:h,onComplete:c,onUpdate:l,resolve:t},d))}else k._tween(Object.assign({},{el:e,obj:n,duration:o,delay:r,stiffness:s,damping:a,ease:u,onStart:h,onComplete:c,onUpdate:l,resolve:t},d))})},k.clear=function(t){t&&t.__mathTween__&&t.__mathTween__.clear()},k.fromTo=function(t,e,n){try{return t=P.getEl(t),k.set(Object.assign({},{el:t},e)),Promise.resolve(k.to(Object.assign({},{el:t},n)))}catch(t){return Promise.reject(t)}},k.delayedCall=function(t,e){try{s.create(t,e)}catch(t){return Promise.reject(t)}},k.set=function(t){var e=t.el,n=R(t,["el"]);e=P.getEl(e);var i=[].concat(e);0===i.length&&(i=[e]);for(var o=0,r=i;o<r.length;o+=1){S.set(Object.assign({},{el:r[o]},n))}},k.__uid__=r.generateUid(),k.mathTweens=[],o.start(function(t){for(var e=k.mathTweens.length-1;e>=0;e--){var n=k.mathTweens[e];n&&n.update(t)}},k.__uid__);var D=function t(){this.elements=t.identity},L={zero:{configurable:!0},identity:{configurable:!0}};L.zero.get=function(){return[0,0,0,0,0,0,0,0,0]},L.identity.get=function(){return[1,0,0,0,1,0,0,0,1]},D.prototype.multiply=function(t){var e=this.elements[0],n=this.elements[3],i=this.elements[6],o=this.elements[1],r=this.elements[4],s=this.elements[7],a=this.elements[2],u=this.elements[5],h=this.elements[8],c=t[0],l=t[3],d=t[6],p=t[1],v=t[4],f=t[7],m=t[2],g=t[5],_=t[8];return this.elements[0]=e*c+n*p+i*m,this.elements[3]=e*l+n*v+i*g,this.elements[6]=e*d+n*f+i*_,this.elements[1]=o*c+r*p+s*m,this.elements[4]=o*l+r*v+s*g,this.elements[7]=o*d+r*f+s*_,this.elements[2]=a*c+u*p+h*m,this.elements[5]=a*l+u*v+h*g,this.elements[8]=a*d+u*f+h*_,this.elements},D.prototype.determinant=function(){var t=this.elements[0],e=this.elements[1],n=this.elements[2],i=this.elements[3],o=this.elements[4],r=this.elements[5],s=this.elements[6],a=this.elements[7],u=this.elements[8];return t*o*u-t*r*a-e*i*u+e*r*s+n*i*a-n*o*s},Object.defineProperties(D,L);var I=function(t){void 0===t&&(t={});var e=t.r;void 0===e&&(e=1);var n=t.g;void 0===n&&(n=1);var i=t.b;void 0===i&&(i=1);var o=t.a;void 0===o&&(o=1),this.r=e,this.g=n,this.b=i,this.a=o};I.prototype.overlay=function(t){void 0===t&&(t={});var e=t.onTopOf;return void 0===e&&(e=new I),new I({r:(1-this.a)*e.r+this.a*this.r,g:(1-this.a)*e.g+this.a*this.g,b:(1-this.a)*e.b+this.a*this.b})};var A=function(){this.position=new c,this.normal=new c,this.tilt=new c,this.inverseNormal=new c,x.on(T.MOVE,this.onPositionChanged.bind(this)),x.on(T.TOUCH,this.onPositionChanged.bind(this))};A.prototype.normalize3D=function(){return{x:this.position.x/window.innerWidth*2-1,y:-this.position.y/window.innerHeight*2+1}},A.prototype.onPositionChanged=function(t){this.position=c.copy(t),this.normal=c.divide(t,new c({x:window.innerWidth,y:window.innerHeight})),this.tilt.x=2*this.normal.x-1,this.tilt.y=1-2*this.normal.y,this.inverseNormal.x=this.normal.x,this.inverseNormal.y=1-this.normal.y};var j=new A;function z(t){void 0===t&&(t={});var e=t.centered;void 0===e&&(e=!1);var n=t.cx;void 0===n&&(n=!1);var i=t.cy;void 0===i&&(i=!1);var o=t.type;void 0===o&&(o="div");var r=t.onDrag;void 0===r&&(r=null);var s=t.onTouch;void 0===s&&(s=null);var a=t.onDrop;void 0===a&&(a=null);var u=t.onMove;void 0===u&&(u=null);var h=t.onClick;void 0===h&&(h=null);var c=t.onHoverIn;void 0===c&&(c=null);var l=t.onHoverOut;void 0===l&&(l=null);var d=t.text;void 0===d&&(d=null);var p=t.children;void 0===p&&(p=[]);var v=t.name;void 0===v&&(v=null);var f=t.col;void 0===f&&(f=!1);var m=t.row;void 0===m&&(m=!1);var g=t.height;void 0===g&&(g=null);var _=t.width;void 0===_&&(_=null);var y=t.x;void 0===y&&(y=0);var b=t.y;void 0===b&&(b=0);var w=t.z;void 0===w&&(w=0);var x=t.scale;void 0===x&&(x=1);var T=t.scaleX;void 0===T&&(T=1);var E=t.scaleY;void 0===E&&(E=1);var C=t.rotation;void 0===C&&(C=0);var O=t.rotationX;void 0===O&&(O=0);var S=t.rotationY;void 0===S&&(S=0);var R=t.borderRadius;void 0===R&&(R=null);var k=t.backgroundColor;void 0===k&&(k=null);var M=t.background;void 0===M&&(M=null);var D=t.margin;void 0===D&&(D=null);var L=t.marginTop;void 0===L&&(L=null);var I=t.marginLeft;void 0===I&&(I=null);var A=t.marginBottom;void 0===A&&(A=null);var j=t.marginRight;void 0===j&&(j=null);var z=t.padding;void 0===z&&(z=null);var V=t.paddingTop;void 0===V&&(V=null);var U=t.paddingLeft;void 0===U&&(U=null);var H=t.paddingBottom;void 0===H&&(H=null);var Y=t.paddingRight;void 0===Y&&(Y=null);var F=t.position;void 0===F&&(F=null);var G=t.top;void 0===G&&(G=null);var W=t.left;void 0===W&&(W=null);var B=t.right;void 0===B&&(B=null);var q=t.bottom;void 0===q&&(q=null);var N=t.fontSize;void 0===N&&(N=null);var X=t.fontWeight;void 0===X&&(X=null);var Q=t.opacity;void 0===Q&&(Q=null);var $=t.color;void 0===$&&($=null);var Z=t.overflow;void 0===Z&&(Z=null);var K=t.href;void 0===K&&(K=null);var J=t.textTransform;void 0===J&&(J=null);var tt=t.textAlign;void 0===tt&&(tt=null);var et=t.maxWidth;void 0===et&&(et=null);var nt=t.perspective;void 0===nt&&(nt=null);var it=t.element;void 0===it&&(it=null);var ot=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&-1===e.indexOf(i)&&(n[i]=t[i]);return n}(t,["centered","cx","cy","type","onDrag","onTouch","onDrop","onMove","onClick","onHoverIn","onHoverOut","text","children","name","col","row","height","width","x","y","z","scale","scaleX","scaleY","rotation","rotationX","rotationY","borderRadius","backgroundColor","background","margin","marginTop","marginLeft","marginBottom","marginRight","padding","paddingTop","paddingLeft","paddingBottom","paddingRight","position","top","left","right","bottom","fontSize","fontWeight","opacity","color","overflow","href","textTransform","textAlign","maxWidth","perspective","element"]);return new P({type:o,attributes:{text:d,name:v,href:K},element:it,events:{onDrag:r,onTouch:s,onDrop:a,onMove:u,onClick:h,onHoverIn:c,onHoverOut:l},shortcuts:{centered:e,cx:n,cy:i,col:f,row:m},css:Object.assign({},{height:g,width:_,x:y,y:b,z:w,scale:x,scaleX:T,scaleY:E,rotation:C,rotationX:O,rotationY:S,borderRadius:R,backgroundColor:k,background:M,margin:D,marginBottom:A,marginLeft:I,marginRight:j,marginTop:L,padding:z,paddingBottom:H,paddingLeft:U,paddingRight:Y,paddingTop:V,position:F,top:G,left:W,right:B,bottom:q,fontSize:N,fontWeight:X,opacity:Q,color:$,overflow:Z,textTransform:J,textAlign:tt,maxWidth:et,perspective:nt},ot),children:p})}var V={webgl:function(){try{var t=document.createElement("canvas"),e=!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"));if(null!=e)return!0}catch(t){return!1}},flexbox:function(){var t=Object.keys(g.prefix({flexWrap:"wrap"}));for(var e in t){if(t.hasOwnProperty(e))if(void 0!==document.documentElement.style[t[e]])return!0}return!1},webaudio:function(){return void 0!==window.AudioContext||void 0!==window.webkitAudioContext}},U=function(){};U.isCompatible=function(t){return t.reduce(function(t,e){return V[e]()},!0)};var H=function(){};H.render=function(t){void 0===t&&(t={});var e=t.el,n=t.component,i=t.requirements;void 0===i&&(i=[]);var o=t.fallback;if(void 0===o&&(o=null),void 0===e)throw new Error("Missing $element");o&&!U.isCompatible(i)&&(n=o),n.__startRender__(),e.appendChild(n.__el__.el),n.onStart&&n.onStart()};var Y=function(t){function e(e){var n=e.routes;void 0===n&&(n=[]),t.call(this,{}),H.router=this,this.query={},this.routes=n,this.fetchedRoute=null;for(var i=this.routes.length-1;i>=0;i--){var o=this.routes[i];"*"!==o.path&&(o.paramsGroupNames=this._getParamsGroupNames(o.path),o.regex=new RegExp(o.path.replace(/\/(:([a-zA-Z0-9_\-]+))/g,"/([a-zA-Z0-9_-]+)").replace(/\//g,"\\/")+"$"))}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={$route:{configurable:!0}};return e.prototype._initializeRoutes=function(){for(var t=!0,e=this.routes.length-1;e>=0;e--){if(t=this._checkCurrentRouteState(this.routes[e],window.location.pathname))break}if(!t){var n=this.routes.find(function(t){return"*"===t.path});n&&this._changeRouteComponent(n,window.location.pathname)}},n.$route.get=function(){for(var t=this.routes.length-1;t>=0;t--){var e=this.routes[t];if(e.regex&&e.regex.test(window.location.pathname))return e}},e.prototype._getParamsGroupNames=function(t){for(var e,n=[],i=new RegExp(":([a-zA-Z0-9_]+)","g");e=i.exec(t);)n.push(e[1]);return n},e.prototype._getParamsGroupValues=function(t,e){return e.match(t).slice(1)},e.prototype._getParams=function(t,e){var n=this;return t.paramsGroupNames.reduce(function(i,o,r){return i[o]=n._getParamsGroupValues(t.regex,e)[r],i},{})},e.prototype._addEventListeners=function(){x.on(w.POP_STATE,this._onPopState.bind(this))},e.prototype._removeEventListeners=function(){x.off(w.POP_STATE,this._onPopState.bind(this))},e.prototype._onPopState=function(t){var e=this.routes.find(function(t){return t.regex&&t.regex.test(window.location.pathname)});e&&this._changeRouteComponent(e,window.location.pathname)},e.prototype._checkCurrentRouteState=function(t,e,n){return void 0===n&&(n=!1),!(!t.regex||!t.regex.test(e))&&(n?this._fetchRouteComponent(t,e):this._changeRouteComponent(t,e),!0)},e.prototype._changeRouteComponent=function(t,e){H.router.query=this._getParams(t,e);var n=new t.component;this.$el.replaceChild(n),k.set({el:n.__el__,position:"absolute",top:0,left:0})},e.prototype._fetchRouteComponent=function(t,e){if(!this.fetchedRoute||this.fetchedRoute.route!==t){H.router.query=this._getParams(t,e);var n=new t.component;return n.isTransition=!0,this.$el.add(n),k.set({el:n.__el__,position:"absolute",top:0,left:0,pointerEvents:"none"}),this.fetchedRoute={route:t,path:e,el:n.__el__},n}},e.prototype.fetch=function(t){if(t!==window.location.pathname){for(var e=null,n=this.routes.length-1;n>=0;n--){var i=this.routes[n];if(i.regex&&i.regex.test(t)){e=this._fetchRouteComponent(i,t);break}}return e}},e.prototype.showFromFetch=function(){k.set({el:this.fetchedRoute.el,opacity:1,pointerEvents:"all"}),window.history.pushState({},null,this.fetchedRoute.path);for(var t=0,e=0,n=this.$el._children;e<n.length;e+=1){var i=n[e];i!==this.fetchedRoute.el&&(i.__el__.remove(),i.destroy(),this.$el._children.splice(t,1)),t++}this.fetchedRoute=null},e.prototype.push=function(t){if(t!==window.location.pathname){for(var e=!0,n=this.routes.length-1;n>=0;n--){if(e=this._checkCurrentRouteState(this.routes[n],t)){window.history.pushState({},null,t);break}}if(!e){var i=this.routes.find(function(t){return"*"===t.path});i&&(window.history.pushState({},null,t),this._changeRouteComponent(i,t))}}},e.prototype.onStart=function(){this._initializeRoutes(),this._addEventListeners()},e.prototype.render=function(){return this.$el=z({position:"relative",width:"100%",height:"100%"})},Object.defineProperties(e.prototype,n),e}(C),F=function(t){function e(e){if(void 0===e&&(e={}),t.call(this,e),!this.props.path)throw new Error("You must specified a path to add a route component")}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.render=function(){return this.$el=z(Object.assign({},{type:"a",href:this.props.path},this.props,{onTouch:this._pushRoute.bind(this),children:this.props.children}))},e.prototype._pushRoute=function(){H.router.push(this.props.path)},e}(C),G=function(){this.x=0,this.y=0,this.z=0,this.alpha=0,this.beta=0,this.gamma=0,this.start()};G.prototype.start=function(){this._addEventListeners()},G.prototype.stop=function(){},G.prototype._addEventListeners=function(){window.addEventListener("deviceorientation",this._onDeviceOrientation.bind(this)),window.addEventListener("devicemotion",this._onDeviceMotion.bind(this))},G.prototype._onDeviceMotion=function(t){if(t.accelerationIncludingGravity)switch(window.orientation){case 0:this.x=-t.accelerationIncludingGravity.x,this.y=t.accelerationIncludingGravity.y,this.z=t.accelerationIncludingGravity.z;break;case 180:this.x=t.accelerationIncludingGravity.x,this.y=-t.accelerationIncludingGravity.y,this.z=t.accelerationIncludingGravity.z;break;case 90:this.x=t.accelerationIncludingGravity.y,this.y=t.accelerationIncludingGravity.x,this.z=t.accelerationIncludingGravity.z;break;case-90:this.x=-t.accelerationIncludingGravity.y,this.y=-t.accelerationIncludingGravity.x,this.z=t.accelerationIncludingGravity.z}},G.prototype._onDeviceOrientation=function(t){switch(window.orientation){case 0:this.alpha=t.beta,this.beta=t.alpha,this.gamma=t.gamma;break;case 180:this.alpha=-t.beta,this.beta=t.alpha,this.gamma=t.gamma;break;case 90:this.alpha=t.alpha,this.beta=t.beta,this.gamma=t.gamma;break;case-90:this.alpha=-t.alpha,this.beta=-t.beta,this.gamma=-t.gamma}};var W=function(t){void 0===t&&(t={});var e=t.el;void 0===e&&(e=null);var n=t.min;void 0===n&&(n=null);var i=t.max;void 0===i&&(i=null);var o=t.axis;void 0===o&&(o=["y"]);var r=t.usePhysics;void 0===r&&(r=!1),e||(e=document.body),this.position=new c,this.delta=new c,this.velocity=new c,this.usePhysics=r,this.min=n,this.max=i,this.el=e,this.axis=o,this.interaction=new E({target:P.getEl(e)}),this.overdragCoefficient=.35,this.target=new c,this.decelerationVelocity=new c,this.decelerationAmplitude=new c,this.decelerationElapsedTime=0,this.decelerationDuration=300,this._violationConstraint={x:null,y:null},this._addEventListeners()},B={violatedConstraint:{configurable:!0}};B.violatedConstraint.get=function(){return null!==this._violationConstraint.x||null!==this._violationConstraint.y},W.prototype._checkBounds=function(){for(var t=0;t<this.axis.length;t++){var e=this.axis[t],n=!!this.max&&this.position[e]>this.max[e];n||!!this.min&&this.position[e]<this.min[e]?(this.interaction._delta[e]*=this.overdragCoefficient,this._violationConstraint[e]=n?this.max[e]:this.min[e]):this._violationConstraint[e]=null}},W.prototype._animateConstraintViolation=function(){for(var t={obj:this.position,duration:.4,ease:i.OutQuint},e=0,n=this.axis;e<n.length;e+=1){var o=n[e];null!==this._violationConstraint[o]&&(t[o]=this._violationConstraint[o])}k.to(t)},W.prototype.onUpdate=function(){this.velocity.y=this.interaction._delta.y*(o.DELTA_TIME?1e3/o.DELTA_TIME:0),this.isDecelerating?(this._decelerate(),this._checkBounds(),null===this._violationConstraint.x&&null===this._violationConstraint.y||(this._animateConstraintViolation(),this.isDecelerating=!1)):(this.position.add(this.delta),this.delta.multScalar(0))},W.prototype._decelerate=function(){this.decelerationElapsedTime+=o.DELTA_TIME;var t=c.multScalar(this.decelerationAmplitude,-Math.exp(-this.decelerationElapsedTime/this.decelerationDuration)),e=t.x>.5||t.x<-.5||(t.y>.5||t.y<-.5);e?this.position=c.add(this.decelerationEndPosition,t):this.position.copy(this.decelerationEndPosition),e||(this.isDecelerating=!1)},W.prototype._addEventListeners=function(){this.interaction.on(T.TOUCH,this._onTouch.bind(this)),this.interaction.on(T.DROP,this._onDrop.bind(this)),this.interaction.on(T.DRAG,this._onDrag.bind(this)),x.on(w.WHEEL,this._onScroll.bind(this)),o.start(this.onUpdate.bind(this))},W.prototype._removeEventListeners=function(){this.interaction.off(T.TOUCH,this._onTouch.bind(this)),this.interaction.off(T.DROP,this._onDrop.bind(this)),this.interaction.off(T.DRAG,this._onDrag.bind(this)),x.off(w.WHEEL,this._onScroll.bind(this)),o.stop(this.onUpdate.bind(this))},W.prototype._onTouch=function(){k.clear(this.position),this._clearDeceleration()},W.prototype._clearDeceleration=function(){this.isDecelerating=!1,this.decelerationElapsedTime=0},W.prototype._onDrop=function(t){this.violatedConstraint?this._animateConstraintViolation():this.usePhysics&&(this.isDecelerating=!0,this.decelerationVelocity.copy(this.velocity),this.decelerationElapsedTime=0,this.decelerationAmplitude=c.multScalar(this.decelerationVelocity,.8),this.decelerationEndPosition=c.add(this.position,this.decelerationAmplitude))},W.prototype._onDrag=function(t){this.usePhysics&&this._checkBounds(),this.delta.copy(t._delta)},W.prototype.scrollTo=function(t,e){void 0===e&&(e={});var n=e.duration;void 0===n&&(n=1);var o=e.delay;void 0===o&&(o=0);var r=e.ease;void 0===r&&(r=i.OutQuint),k.to(Object.assign({},{el:this.position},t,{duration:n,delay:o,ease:r}))},W.prototype._onScroll=function(t){var e=t.deltaX;this.delta.y+=t.deltaY,this.delta.x+=e,this.delta.multScalar(.9).multScalar(-1)},Object.defineProperties(W.prototype,B);var q=function(t){this.props=t};q.prototype.draw=function(){},q.prototype.update=function(){};var N=function(t){function e(e){void 0===e&&(e={}),t.call(this,e),this.width=e.width||window.innerWidth,this.height=e.height||window.innerHeight,this.children=[],this._addChildren(e.children),delete e.children}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.onStart=function(){this._setDimensions(),this.ctx=this.$canvas.el.getContext("2d"),this._addEvents()},e.prototype._addChildren=function(t){void 0===t&&(t=[]);for(var e=t.length-1;e>=0;e--){this.add(t[e])}},e.prototype._removeEvents=function(){x.off(w.RESIZE,this._onResize.bind(this))},e.prototype._addEvents=function(){x.on(w.RESIZE,this._onResize.bind(this))},e.prototype.onDestroy=function(){this._removeEvents()},e.prototype.onUpdate=function(){this.clear();for(var t=this.children.length-1;t>=0;t--){var e=this.children[t];e instanceof q&&(e.update&&e.update(),e.draw&&e.draw(this.ctx))}},e.prototype._setDimensions=function(){this.$canvas.el.width=this.width,this.$canvas.el.height=this.height},e.prototype._onResize=function(){this._setDimensions()},e.prototype.render=function(){return this.$canvas=z(Object.assign({},{type:"canvas"},this.props))},e.prototype.add=function(t){this.children.unshift(t)},e.prototype.remove=function(t){var e=this.children.indexOf(t);~e&&this.children.splice(e,1)},e.prototype.clear=function(){this.ctx.clearRect(0,0,this.width,this.height)},e.prototype.toDataUrl=function(t,e){return this.$canvas.el.toDataURL(t,e)},e}(C),X=function(t){void 0===t&&(t={});var e=t.volume;void 0===e&&(e=1);var n=t.loop;void 0===n&&(n=!1);var i=t.retrig;void 0===i&&(i=!1);var o=t.url;void 0===o&&(o=null);var r=t.playbackRate;void 0===r&&(r=1);var s=t.destination;void 0===s&&(s=null);var a=t.name;void 0===a&&(a=null);var u=t.loadGroup;void 0===u&&(u=null),this.loaded=!1,this.playing=!1,this.volume=e,this.loop=n,this.retrig=i,this.source=tt.context.createBufferSource(),this.source.loop=n,this.url=o,this.name=a,this.source.buffer=tt.audios[this.name].buffer,this.loadGroup=u,this.playbackRate=r,this.gainOutput=tt.context.createGain(),this.destinationOutput=s,this.addEvents()};X.prototype.connect=function(){this.source.connect(this.gainOutput),this.gainOutput.connect(this.destinationOutput)},X.prototype.disconnect=function(){this.gainOutput.disconnect(this.destinationOutput)},X.loadBuffer=function(t){try{return new Promise(function(e,n){fetch(tt.audios[t].url).then(function(t){return t.arrayBuffer()}).then(function(t){return tt.context.decodeAudioData(t)}).then(function(n){tt.audios[t].buffer=n,tt.audios[t].loaded=!0,e()}).catch(function(t){return console.log(t)})})}catch(t){return Promise.reject(t)}},X.prototype.start=function(t){void 0===t&&(t=0);try{var e=this;function n(){e.connect(),e.source.start(t)}var i=function(){if(!tt.audios[e.name].loaded)return Promise.resolve(e.loadBuffer()).then(function(){})}();return i&&i.then?i.then(n):n()}catch(t){return Promise.reject(t)}},X.prototype.stop=function(t){void 0===t&&(t=0),this.source.stop(t)},X.prototype.onEnded=function(){this.removeEvents(),this.disconnect(),clearTimeout(this.inTimeout),clearTimeout(this.outTimeout)},X.prototype.addEvents=function(){this.source.addEventListener("ended",this.onEnded.bind(this))},X.prototype.removeEvents=function(){this.source.removeEventListener("ended",this.onEnded.bind(this))},X.prototype.fadeOutAndStop=function(t){var e=this;void 0===t&&(t={});var n=t.duration;void 0===n&&(n=4);var i=t.delay;void 0===i&&(i=0),this.outTimeout=setTimeout(function(){e.gainOutput.gain.linearRampToValueAtTime(0,tt.context.currentTime+n),e.stop(tt.context.currentTime+n),clearTimeout(e.outTimeout)},1e3*i)},X.prototype.fadeInAndStart=function(t){var e=this;void 0===t&&(t={});var n=t.duration;void 0===n&&(n=4);var i=t.delay;void 0===i&&(i=0),this.inTimeout=setTimeout(function(){e.gainOutput.gain.setValueAtTime(0,tt.context.currentTime),e.gainOutput.gain.linearRampToValueAtTime(e.volume,tt.context.currentTime+n),e.start(),clearTimeout(e.inTimeout)},1e3*i)};var Q=function t(e){void 0===e&&(e={});var n=e.type;void 0===n&&(n=t.FILTER_TYPE.LOW_PASS_FILTER);var i=e.frequency;void 0===i&&(i=null);var o=e.gain;void 0===o&&(o=0);var r=e.Q;void 0===r&&(r=0),this.output=tt.context.createBiquadFilter(),this.output.type=t.FILTER_TYPE[n],this.output.Q.value=r,this.output.frequency.value=i,this.output.gain.value=o},$={FILTER_TYPE:{configurable:!0}};$.FILTER_TYPE.get=function(){return{LOW_PASS_FILTER:"lowpass",HIGH_PASS_FILTER:"highpass"}},Object.defineProperties(Q,$);var Z={LOW_PASS_FILTER:Q,HIGH_PASS_FILTER:Q},K=function(t){void 0===t&&(t={});var e=t.volume;void 0===e&&(e=1);var n=t.name;void 0===n&&(n=null);var i=t.effects;void 0===i&&(i=[]);var o=t.audios;void 0===o&&(o=[]);var r=t.destination;for(var s in void 0===r&&(r=null),this.volume=e,this.name=n,this.effects=[],this.gainOutput=tt.context.createGain(),this.destinationOutput=r,this.audios=o,o)tt.audios[s]=o[s],tt.audios[s].loaded=!1,tt.audios[s].destination=this.gainOutput;for(var a=0,u=i;a<u.length;a+=1){var h=u[a],c=new Z[h.type](h);this.effects.push(c)}this.gainOutput.gain.value=this.volume,this.connect()};K.prototype.connect=function(){for(var t=this.gainOutput,e=0,n=this.effects;e<n.length;e+=1){var i=n[e];t.connect(i.output),t=i.output}t.connect(this.destinationOutput)},K.prototype.disconnect=function(){this.gainOutput.disconnect(this.destinationOutput)},K.prototype.solo=function(){for(var t=0;t<tt.channels.length;t++){var e=tt.channels[t];e!==this?e.mute():this.unmute()}},K.prototype.unmute=function(){this.gainOutput.gain.value=this.volume},K.prototype.mute=function(){this.gainOutput.gain.value=0},K.prototype.toggleMute=function(){0===this.gainOutput.gain.value?this.unmute():this.mute()};var J=function(t){function e(e){t.call(this,Object.assign({},e,{destination:tt.context.destination}))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(K),tt=function(){};tt.trigger=function(t,e){if(void 0===e&&(e=null),void 0===tt.audios[t])throw new Error('"'+t+'" audio not found');var n=new X(Object.assign({},tt.audios[t],{name:t}));return null!==e?n.fadeInAndStart(e):n.start(),n},tt.getChannel=function(t){return tt.channels.find(function(e){return e.name===t})||null},tt.init=function(t){var e=new J(t.master);tt.channels.push(e);for(var n=0;n<t.channels.length;n++){tt.channels.push(new K(Object.assign({},t.channels[n],{destination:e.gainOutput})))}},tt.load=function(t){void 0===t&&(t={});var e=t.groups;void 0===e&&(e=[]);var n=t.onProgress;void 0===n&&(n=null);var i=t.onComplete;void 0===i&&(i=null);try{var o=[],r=0;for(var s in tt.audios){if(e.includes(tt.audios[s].loadGroup)){var a=X.loadBuffer(s);o.push(a),a.then(function(){r++,n&&n(r/o.length)})}}return Promise.resolve(Promise.all(o).then(function(){i&&i()}))}catch(t){return Promise.reject(t)}},tt.start=function(){tt.context=new AudioContext},tt.channels=[],tt.audios={};var et=function(t){void 0===t&&(t={});var e=t.url;void 0===e&&(e=null),this.url=e,this.connected=!1,this.socket=null,this.events={}};et.prototype.addEvents=function(){this.socket.addEventListener("close",this._onClose.bind(this)),this.socket.addEventListener("error",this._onError.bind(this)),this.socket.addEventListener("message",this._onMessage.bind(this))},et.prototype.removeEvents=function(){this.socket.addEventListener("close",this._onClose.bind(this)),this.socket.addEventListener("error",this._onError.bind(this)),this.socket.addEventListener("message",this._onMessage.bind(this))},et.prototype.openSocket=function(){var t=this;return new Promise(function(e,n){var i=new WebSocket(t.url);i.onopen=function(){t.connected=!0,t.socket=i,t.addEvents(),e()}})},et.prototype.closeSocket=function(){this.removeEvents(),this.connected=!1,this.socket=null},et.prototype._onClose=function(t){},et.prototype._onError=function(t){},et.prototype._onMessage=function(t){var e=JSON.parse(t.data);this._callEventListeners(e.type,e.data)},et.prototype._callEventListeners=function(t,e){if(this.events[t])for(var n=this.events[t].length-1;n>=0;n--){var i=this.events[t][n];i&&i(e)}},et.prototype.on=function(t,e){void 0===this.events[t]&&(this.events[t]=[]),this.events[t].push(e)},et.prototype.emit=function(t,e){try{var n=this;function i(){n.socket.send(JSON.stringify({type:t,data:e}))}var o=function(){if(!n.connected)return Promise.resolve(n.openSocket()).then(function(){})}();return o&&o.then?o.then(i):i()}catch(t){return Promise.reject(t)}},et.prototype.off=function(t,e){var n=this.events[t].indexOf(e);~n&&this.events[t].splice(n,1)},et.prototype.offAll=function(t){this.events[t]=[]};var nt=function(t){this.worker=t};nt.prototype.pingPongMessage=function(t){try{var e=this,n=r.generateUid();return new Promise(function(i,o){e.worker.postMessage({message:t,id:n});var r=function(t){t.data.id===n&&(e.worker.removeEventListener("message",r),i(t.data.value))};e.worker.addEventListener("message",r)})}catch(t){return Promise.reject(t)}};var it=function(){};it.proxy=function(t,e,n){return void 0===e&&(e=[]),void 0===n&&(n=function(){}),new Proxy(n,{get:function(n,i,o){if("then"===i&&0===e.length)return{then:function(){return o}};if("then"===i){var r=t.pingPongMessage({type:"GET",callPath:e});return Promise.resolve(r).then.bind(r)}return it.proxy(t,e.concat(i))},apply:function(n,i,o){return"bind"===e[e.length-1]?it.proxy(t,e.slice(0,-1)):t.pingPongMessage({type:"APPLY",callPath:e,argumentsList:o})},construct:function(n,i){try{return Promise.resolve(t.pingPongMessage({type:"CONSTRUCT",callPath:e,argumentsList:i})).then(function(){return it.proxy(t)})}catch(t){return Promise.reject(t)}},set:function(n,i,o,r){return t.pingPongMessage({type:"SET",callPath:e,property:i,value:o})}})},it.spawn=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];try{var i=URL.createObjectURL(new Blob(["("+'function exposeWorker(target) {\n    let instance = null;\n\n    const TYPED_ARRAY_TYPES = [\n        Int8Array,\n        Uint8Array,\n        Uint8ClampedArray,\n        Int16Array,\n        Uint16Array,\n        Int32Array,\n        Uint32Array,\n        Float32Array,\n        Float64Array\n    ];\n\n    function isTransferable(obj) {\n        for (let i = 0; i < TYPED_ARRAY_TYPES.length; i++) {\n            const typedArray = TYPED_ARRAY_TYPES[i];\n            if (obj instanceof typedArray) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    function transferableProperties(obj) {\n        const transferables = [];\n\n        for (let property in obj) {\n            const value = obj[property];\n            if (isTransferable(value)) {\n                transferables.push(value.buffer);\n            }\n        }\n\n        return transferables;\n    }\n\n    function getObjValueAtPath(callPath = [], target = null) {\n        if (!target) {\n            return null;\n        }\n\n        let obj = target;\n\n        for (let i = 0; i < callPath.length; i++) {\n            const subPath = callPath[i];\n            obj = obj[subPath];\n        }\n\n        return obj;\n    }\n\n    self.addEventListener("message", async event => {\n        const { message, id } = event.data;\n\n        let response = {\n            id\n        };\n\n        let obj = getObjValueAtPath(message.callPath, instance);\n\n        switch (message.type) {\n            case "APPLY":\n                response.value = await obj.apply(obj, message.argumentsList);\n                break;\n            case "GET":\n                response.value = obj;\n                break;\n            case "SET":\n                obj[message.property] = message.value;\n                response.value = true;\n                break;\n            case "CONSTRUCT":\n                instance = new target(...message.argumentsList);\n                response.value = instance;\n                break;\n        }\n\n        self.postMessage(response, transferableProperties(response.value));\n    });\n}'.toString()+")("+t.toString()+")"])),o=new Worker(i),r=new nt(o),s=it.proxy(r);return Promise.resolve(new(Function.prototype.bind.apply(s,[null].concat(e))))}catch(t){return Promise.reject(t)}};var ot=function(){};ot.enterFullScreen=function(){["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"].every(function(t){if(void 0===document.body[t])return!0;document.body[t]()})},ot.leaveFullScreen=function(){["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"].every(function(t){if(void 0===document[t])return!0;document[t]()})};var rt=function(t){void 0===t&&(t={});var e=t.target;void 0===e&&(e=null);var n=t.el;void 0===n&&(n=e);var i=t.usePhysics;void 0===i&&(i=!0);var o=t.constraints;void 0===o&&(o=[]);var s=t.min;void 0===s&&(s=null);var a=t.max;void 0===a&&(a=null);var u=t.snap;void 0===u&&(u=null);var h=t.axis;void 0===h&&(h=["x","y"]);var l=t.onUpdate;if(void 0===l&&(l=null),!e)throw new Error("A target is required");this.usePhysics=i,this.constraints=o,this.position=new c,this.overdragCoefficient=.15,this.frictionCoefficient=.01,this.dragging=!1,this.min=s,this.max=a,this.snap=u,this.axis=h,this.target=e,this.interaction=new E({target:P.getEl(e)}),this.decelerationStartPosition=new c,this.decelerationVelocity=new c,this.startDragPosition=new c,this.decelerationStartTime=0,this.isDecelerating=!1,this.isSimulatingMovement=!1,this._violationConstraint={x:null,y:null},this.onUpdateCallback=l,this.__uid__=r.generateUid(),this._addEvents()},st={violatedConstraint:{configurable:!0},hasHighVelocity:{configurable:!0},hasSnaped:{configurable:!0}};rt.prototype._addEvents=function(){this.interaction.on(T.DRAG,this.onDrag.bind(this)),this.interaction.on(T.DROP,this.onDrop.bind(this)),this.interaction.on(T.TOUCH,this.onTouch.bind(this)),o.start(this.onUpdate.bind(this),this.__uid__)},rt.prototype._removeEvents=function(){this.interaction.off(T.DRAG,this.onDrag.bind(this)),this.interaction.off(T.DROP,this.onDrop.bind(this)),this.interaction.off(T.TOUCH,this.onTouch.bind(this)),o.stop(this.__uid__)},rt.prototype.stop=function(){this._removeEvents()},rt.prototype.onUpdate=function(){this.usePhysics&&this.isDecelerating&&(this._animateMomentum(),this._checkBounds(),null===this._violationConstraint.x&&null===this._violationConstraint.y||(this._animateConstraintViolation(),this.isDecelerating=!1)),this.onUpdateCallback&&this.onUpdateCallback(this.position)},rt.prototype._checkBounds=function(){for(var t=0;t<this.axis.length;t++){var e=this.axis[t],n=!!this.max&&this.position[e]>this.max[e];n||!!this.min&&this.position[e]<this.min[e]?(this.interaction._delta[e]*=this.overdragCoefficient,this._violationConstraint[e]=n?this.max[e]:this.min[e]):this._violationConstraint[e]=null}},rt.prototype.onDrag=function(){this.dragging=!0,this.usePhysics&&this._checkBounds(),this.position.add(this.interaction._delta),!this.usePhysics&&this.min&&this.max&&this.position.clamp(this.min,this.max)},rt.prototype._animateConstraintViolation=function(){for(var t=this,e={obj:this.position,duration:.4,ease:i.OutQuint,onComplete:function(){t.dragging=!1}},n=0,o=this.axis;n<o.length;n+=1){var r=o[n];null!==this._violationConstraint[r]&&(e[r]=this._violationConstraint[r])}k.to(e)},rt.prototype._animateMomentum=function(){for(var t=(performance.now()-this.decelerationStartTime)/600,e=0,n=this.axis;e<n.length;e+=1){var i=n[e],o=this.decelerationStartPosition[i]+this.decelerationVelocity[i]*Math.pow(this.frictionCoefficient,t)/Math.log(this.frictionCoefficient)-this.decelerationVelocity[i]/Math.log(this.frictionCoefficient);this.isDecelerating=o-this.position[i]!=0,this.position[i]=o}},rt.prototype._animateSnaping=function(){for(var t=this,e={obj:this.position,duration:.4,ease:i.OutQuint,onComplete:function(){t.dragging=!1}},n=0,o=this.axis;n<o.length;n+=1){var r=o[n];null!==this.snap[r]&&(e[r]=h.roundToNearest(this.position[r],this.snap[r]))}k.to(e)},rt.prototype.reset=function(){this.interaction.reset(),this.decelerationStartPosition=new c,this.decelerationVelocity=new c,this.startDragPosition=new c,this.position=new c,this.decelerationStartTime=0,this.isDecelerating=!1,this.isSimulatingMovement=!1,this._violationConstraint={x:null,y:null}},rt.prototype.onTouch=function(){k.clear(this.position),this.isDecelerating=!1,this.startDragPosition.copy(this.position)},st.violatedConstraint.get=function(){return null!==this._violationConstraint.x||null!==this._violationConstraint.y},st.hasHighVelocity.get=function(){return null!==this.snap&&(Math.abs(this.interaction.velocity.x)>300||Math.abs(this.interaction.velocity.y)>300)},st.hasSnaped.get=function(){return null!==this.snap&&(this.position.x%this.snap.x!=0||this.position.y%this.snap.y!=0)},rt.prototype._triggerDropAnimation=function(){this.usePhysics&&this.violatedConstraint?this._animateConstraintViolation():this.usePhysics&&this.hasHighVelocity?this._simulateMovement():this.usePhysics&&this.hasSnaped?this._animateSnaping():this.usePhysics&&(this.isDecelerating=!0)},rt.prototype._simulateMovement=function(){for(var t=this,e={obj:this.position,duration:.4,ease:i.OutQuint,onUpdate:function(){t.min&&t.max&&t.position.clamp(t.min,t.max)}},n=0,o=this.axis;n<o.length;n+=1){var r=o[n];null!==this.snap[r]&&(e[r]=h.roundToNearest(this.startDragPosition[r],this.snap[r])+Math.sign(this.decelerationVelocity[r])*this.snap[r])}k.to(e)},rt.prototype.onDrop=function(){this.decelerationStartTime=performance.now(),this.decelerationVelocity.copy(this.interaction.velocity),this.decelerationStartPosition.copy(this.position),this._triggerDropAnimation()},Object.defineProperties(rt.prototype,st);var at=function(){this.start(),this.callbacks={greaterThan:[],between:[],lessThan:[],defaults:[]}};at.prototype.lessThan=function(t,e){var n={value:t,callback:e};this.isLessThan(n)&&n.callback(),this.callbacks.lessThan.push(n)},at.prototype.greaterThan=function(t,e){var n={value:t,callback:e};this.isGreaterThan(n)&&n.callback(),this.callbacks.greaterThan.push(n)},at.prototype.between=function(t,e,n){var i={min:t,max:e,callback:n};this.isBetween(i)&&i.callback(),this.callbacks.between.push(i)},at.prototype.base=function(t){this.callbacks.defaults.push({callback:t})},at.prototype.start=function(){x.on(w.RESIZE,this.onResize.bind(this))},at.prototype.stop=function(){x.off(w.RESIZE,this.onResize.bind(this))},at.prototype.isBetween=function(t){return window.innerWidth>=t.min&&window.innerWidth<=t.max},at.prototype.isGreaterThan=function(t){return t.value<window.innerWidth},at.prototype.isLessThan=function(t){return t.value>window.innerWidth},at.prototype.onResize=function(){for(var t=this.callbacks.lessThan.length-1;t>=0;t--){var e=this.callbacks.lessThan[t];if(this.isLessThan(e))e.callback();else for(var n=this.callbacks.defaults.length-1;t>=0;t--)this.callbacks.defaults[n].callback()}for(var i=this.callbacks.greaterThan.length-1;i>=0;i--){var o=this.callbacks.greaterThan[i];this.isGreaterThan(o)&&o.callback()}for(var r=this.callbacks.between.length-1;r>=0;r--){var s=this.callbacks.between[r];this.isBetween(s)&&s.callback()}};var ut="\nclass DecodeImageThread {\n  async decodeImage(imagePath) {\n    const response = await fetch(imagePath);\n    const blob = await response.blob();\n    const bitmap = await createImageBitmap(blob);\n    return bitmap;\n  }\n}",ht=function(){};ht.load=function(t,e){var n=e.onStart;void 0===n&&(n=null);var i=e.onProgress;void 0===i&&(i=null);var o=e.onComplete;void 0===o&&(o=null);try{return Promise.resolve(it.spawn(ut)).then(function(e){var r=[],s=0,a=function(n){r.push(e.decodeImage(t[n]).then(function(t){ht.images[n]=t,s++,i&&i(s/r.length)}))};for(var u in t)a(u);return n&&n(r.length),Promise.resolve(Promise.all(r).then(function(){o&&o()}))})}catch(t){return Promise.reject(t)}},ht.get=function(t){return ht.images[t]},ht.images={};var ct=function(){};ct.imageFromBitmap=function(t){var e=document.createElement("canvas"),n=e.getContext("2d");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),e};var lt=function(){};lt.get=function(t){void 0===t&&(t={});var e=t.url,n=t.queryParams;void 0===n&&(n={});var i=t.headers;void 0===i&&(i={});try{return Promise.resolve(lt.request({url:e,queryParams:n,type:"GET"}))}catch(t){return Promise.reject(t)}},lt.request=function(t){return new Promise(function(e,n){var i=new XMLHttpRequest;for(var o in i.open(t.type,t.url,!0),i.onreadystatechange=function(){if(i&&4===i.readyState&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))){var t={body:i.responseText,status:i.status,statusText:i.statusText,headers:i.getAllResponseHeaders()};e(t)}},t.headers)i.setRequestHeader(o,t.headers[o]);i.send(t.body||null)})},lt.post=function(t){void 0===t&&(t={});var e=t.url,n=t.body;void 0===n&&(n=null);var i=t.headers;void 0===i&&(i={});try{return Promise.resolve(lt.request({url:e,body:n,type:"POST"}))}catch(t){return Promise.reject(t)}};var dt=function(){};dt.load=function(t,e){var n=t.fonts;void 0===n&&(n=[]);var i=e.onStart;void 0===i&&(i=null);var o=e.onProgress;void 0===o&&(o=null);var r=e.onComplete;void 0===r&&(r=null);try{for(var s=[],a=0,u=0,h=n;u<h.length;u+=1){s.push(dt.loadFont(h[u]).then(function(){a++,o&&o(a)}))}return i&&i(s.length),Promise.resolve(Promise.all(s).then(function(){r&&r()}))}catch(t){return Promise.reject(t)}},dt.loadFont=function(t){var e=document.createElement("span");return e.style.opacity=0,e.innerText="Hello",e.style.fontFamily="Circular Std",e.style.pointerEvents="none",e.style.position="absolute",document.body.appendChild(e),lt.get({url:t.url}).then(function(){document.body.removeChild(e)})},t.FontLoader=dt,t.HttpClient=lt,t.DecodeImageThread=ut,t.ImageLoader=ht,t.EventEmitter=_,t.TweenManager=k,t.Component=C,t.Ease=i,t.SuperMath=h,t.SuperDom=H,t.Vector2=c,t.Matrix2=D,t.Device=y,t.Color=I,t.Mouse=j,t.SuperString=a,t.Create=z,t.Router=Y,t.Route=F,t.Accelerometer=G,t.Scrollable=W,t.Canvas=N,t.Object2D=q,t.Interaction=E,t.InteractionTypes=T,t.Render=o,t.SuperAudioManager=tt,t.SuperSocketManager=et,t.SuperCrypto=r,t.ThreadManager=it,t.SuperWindow=x,t.WindowEventsTypes=w,t.Screen=ot,t.File=function(){},t.Draggable=rt,t.MediaQuery=at,t.SuperCanvasUtils=ct});
